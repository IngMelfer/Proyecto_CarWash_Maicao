# Instrucciones para configurar la cancelación automática de reservas en PythonAnywhere

Ya que el sistema se desplegará en PythonAnywhere, necesitamos configurar la cancelación automática de reservas sin pago de manera diferente a la solución local en Windows. En PythonAnywhere, utilizaremos las tareas programadas (scheduled tasks) que ofrece la plataforma.

## Configuración en PythonAnywhere

### 1. Acceder a la sección de tareas programadas

1. Inicia sesión en tu cuenta de PythonAnywhere
2. Ve a la pestaña "Tasks" (Tareas)
3. Aquí podrás configurar tareas que se ejecuten automáticamente a intervalos regulares

### 2. Crear una nueva tarea programada

1. En la sección "Create a new scheduled task" (Crear una nueva tarea programada):
   - Selecciona la frecuencia: "Every 5 minutes" (Cada 5 minutos)
   - En el campo de comando, ingresa:
     ```
     cd ~/autolavados-plataforma && python manage.py cancelar_reservas_sin_pago
     ```
   - Haz clic en "Create" (Crear)

### 3. Verificar la configuración

1. La tarea aparecerá en la lista de tareas programadas
2. PythonAnywhere ejecutará este comando cada 5 minutos
3. No se mostrará ninguna ventana ya que se ejecuta en el servidor

### 4. Revisar los logs (opcional)

Si deseas verificar que la tarea se está ejecutando correctamente:

1. Modifica el comando para redirigir la salida a un archivo de registro:
   ```
   cd ~/autolavados-plataforma && python manage.py cancelar_reservas_sin_pago >> ~/logs/cancelaciones.log 2>&1
   ```
2. Puedes revisar este archivo de registro para verificar la ejecución

### 5. Consideraciones importantes

- Asegúrate de que la ruta al proyecto sea correcta según tu configuración en PythonAnywhere
- El entorno virtual se activará automáticamente si está configurado correctamente en PythonAnywhere
- La tarea se ejecutará con los permisos de tu cuenta de PythonAnywhere
- No es necesario preocuparse por ventanas visibles ya que todo se ejecuta en el servidor

### 6. Solución alternativa: Usar el panel de administración de Django

Si prefieres no usar las tareas programadas de PythonAnywhere, puedes:

1. Crear una vista en el panel de administración que ejecute manualmente el comando
2. Configurar un endpoint protegido que pueda ser llamado por un servicio externo de programación de tareas (como cron-job.org)

Esta configuración garantizará que las reservas sin pago se cancelen automáticamente cada 5 minutos sin necesidad de intervención manual y sin mostrar ninguna interfaz visual.